<!DOCTYPE html>
<html lang="ja">
<head>
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>çŠ¬ç¨®å½“ã¦ã‚¯ã‚¤ã‚º</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#f0f0f0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap');

    body {
      font-family: 'Kosugi Maru', sans-serif;
      padding: 20px;
      text-align: center;
      background-color: #e0f7fa;
      color: #333;
    }

    img {
      width: 100%;
      max-width: 300px;
      height: auto;
      object-fit: cover;
      border-radius: 12px;
      margin: 0 auto;
      display: block;
    }

    .choices {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }

    button {
      padding: 12px 20px;
      font-size: 1.2rem;
      width: 80%;
      max-width: 300px;
      border-radius: 12px;
      border: 2px solid #ccc;
      background-color: #fff;
      color: #444;
      cursor: pointer;
      font-family: 'Kosugi Maru', sans-serif;
      transition: background-color 0.2s;
    }

    button:hover {
      background-color: #f0f0f0;
    }

    #result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.2rem;
    }

    #score {
      margin-top: 10px;
      font-size: 1rem;
      color: #333;
    }

    #resetBtn {
      margin-top: 20px;
      background-color: #ffcaca;
    }
  </style>
</head>
<body>
  <h1>ã“ã®çŠ¬ç¨®ãªãƒ¼ã‚“ã ï¼Ÿ</h1>
  <img id="dogImage" src="" alt="çŠ¬ã®ç”»åƒ">
  <div class="choices" id="choices"></div>
  <div id="result"></div>
  <div id="score">æ­£è§£: 0 / ä¸æ­£è§£: 0</div>
  <button id="nextBtn" style="display:none;">æ¬¡ã®å•é¡Œ</button>
  <button id="resetBtn">ã‚¹ã‚³ã‚¢ã‚’ãƒªã‚»ãƒƒãƒˆ</button>

  <script>
    const breedMap = {
      "affenpinscher": "ã‚¢ãƒ¼ãƒ•ã‚§ãƒ³ãƒ”ãƒ³ã‚·ãƒ£ãƒ¼", "african": "ã‚¢ãƒ•ãƒªã‚«ãƒ³", "airedale": "ã‚¨ã‚¢ãƒ‡ãƒ¼ãƒ«ãƒ»ãƒ†ãƒªã‚¢",
      "akita": "ç§‹ç”°çŠ¬", "appenzeller": "ã‚¢ãƒƒãƒšãƒ³ãƒ„ã‚§ãƒ©ãƒ¼", "australian": "ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ãƒ³ãƒ»ã‚·ã‚§ãƒ‘ãƒ¼ãƒ‰",
      "basenji": "ãƒã‚»ãƒ³ã‚¸ãƒ¼", "beagle": "ãƒ“ãƒ¼ã‚°ãƒ«", "bluetick": "ãƒ–ãƒ«ãƒ¼ãƒ†ã‚£ãƒƒã‚¯ãƒ»ã‚¯ãƒ¼ãƒ³ãƒã‚¦ãƒ³ãƒ‰",
      "borzoi": "ãƒœãƒ«ã‚¾ã‚¤", "bouvier": "ãƒ–ãƒ¼ãƒ“ã‚¨ãƒ»ãƒ‡ãƒ»ãƒ•ãƒ©ãƒ³ãƒ€ãƒ¼ã‚¹", "boxer": "ãƒœã‚¯ã‚µãƒ¼",
      "brabancon": "ãƒ—ãƒãƒ»ãƒ–ãƒ©ãƒãƒ³ã‚½ãƒ³", "briard": "ãƒ–ãƒªã‚¢ãƒ¼ãƒ‰", "buhund": "ãƒãƒ«ã‚¦ã‚§ã‚¸ã‚¢ãƒ³ãƒ»ãƒ–ãƒ¼ãƒ•ãƒ³ãƒ‰",
      "bulldog": "ãƒ–ãƒ«ãƒ‰ãƒƒã‚°", "bullterrier": "ãƒ–ãƒ«ãƒ»ãƒ†ãƒªã‚¢", "cairn": "ã‚±ã‚¢ãƒ³ãƒ»ãƒ†ãƒªã‚¢",
      "cattledog": "ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ãƒ³ãƒ»ã‚­ãƒ£ãƒˆãƒ«ãƒ»ãƒ‰ãƒƒã‚°", "chihuahua": "ãƒãƒ¯ãƒ¯", "chow": "ãƒãƒ£ã‚¦ãƒãƒ£ã‚¦",
      "clumber": "ã‚¯ãƒ©ãƒ³ãƒãƒ¼ãƒ»ã‚¹ãƒ‘ãƒ‹ã‚¨ãƒ«", "cockapoo": "ã‚³ãƒƒã‚«ãƒ—ãƒ¼", "collie": "ã‚³ãƒªãƒ¼",
      "coonhound": "ã‚¯ãƒ¼ãƒ³ãƒã‚¦ãƒ³ãƒ‰", "corgi": "ã‚³ãƒ¼ã‚®ãƒ¼", "cotondetulear": "ã‚³ãƒˆãƒ³ãƒ»ãƒ‰ãƒ»ãƒ†ãƒ¥ãƒ¬ã‚¢ãƒ¼ãƒ«",
      "dachshund": "ãƒ€ãƒƒã‚¯ã‚¹ãƒ•ãƒ³ãƒˆ", "dalmatian": "ãƒ€ãƒ«ãƒ¡ã‚·ã‚¢ãƒ³", "dane": "ã‚°ãƒ¬ãƒ¼ãƒˆãƒ»ãƒ‡ãƒ¼ãƒ³",
      "deerhound": "ã‚¹ã‚³ãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ»ãƒ‡ã‚£ã‚¢ãƒã‚¦ãƒ³ãƒ‰", "dhole": "ãƒ‰ãƒ¼ãƒ«", "dingo": "ãƒ‡ã‚£ãƒ³ã‚´",
      "doberman": "ãƒ‰ãƒ¼ãƒ™ãƒ«ãƒãƒ³", "elkhound": "ãƒãƒ«ã‚¦ã‚§ã‚¸ã‚¢ãƒ³ãƒ»ã‚¨ãƒ«ã‚¯ãƒã‚¦ãƒ³ãƒ‰", "entlebucher": "ã‚¨ãƒ³ãƒˆãƒ¬ãƒ–ãƒƒãƒãƒ¼ãƒ»ã‚­ãƒ£ãƒˆãƒ«ãƒ‰ãƒƒã‚°",
      "eskimo": "ã‚¢ãƒ¡ãƒªã‚«ãƒ³ãƒ»ã‚¨ã‚¹ã‚­ãƒ¢ãƒ¼ãƒ»ãƒ‰ãƒƒã‚°", "finnish": "ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥ãƒ»ã‚¹ãƒ”ãƒƒãƒ„", "frise": "ãƒ“ã‚·ãƒ§ãƒ³ãƒ»ãƒ•ãƒªãƒ¼ã‚¼",
      "germanshepherd": "ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ»ã‚·ã‚§ãƒ‘ãƒ¼ãƒ‰", "greyhound": "ã‚°ãƒ¬ã‚¤ãƒã‚¦ãƒ³ãƒ‰", "groenendael": "ã‚°ãƒ­ãƒ¼ãƒãƒ³ãƒ€ãƒ¼ãƒ«",
      "havanese": "ãƒãƒãƒ‹ãƒ¼ã‚º", "husky": "ã‚·ãƒ™ãƒªã‚¢ãƒ³ãƒ»ãƒã‚¹ã‚­ãƒ¼", "keeshond": "ã‚­ãƒ¼ã‚¹ãƒ›ãƒ³ãƒ‰",
      "kelpie": "ã‚±ãƒ«ãƒ”ãƒ¼", "komondor": "ã‚³ãƒ¢ãƒ³ãƒ‰ãƒ¼ãƒ«", "kuvasz": "ã‚¯ãƒ¼ãƒãƒ¼ã‚¹",
      "labrador": "ãƒ©ãƒ–ãƒ©ãƒ‰ãƒ¼ãƒ«ãƒ»ãƒ¬ãƒˆãƒªãƒ¼ãƒãƒ¼", "leonberg": "ãƒ¬ã‚ªãƒ³ãƒ™ãƒ«ã‚¬ãƒ¼", "lhasa": "ãƒ©ã‚µãƒ»ã‚¢ãƒ—ã‚½",
      "malamute": "ã‚¢ãƒ©ã‚¹ã‚«ãƒ³ãƒ»ãƒãƒ©ãƒŸãƒ¥ãƒ¼ãƒˆ", "malinois": "ãƒ™ãƒ«ã‚¸ã‚¢ãƒ³ãƒ»ãƒãƒªãƒã‚¢", "maltese": "ãƒãƒ«ãƒãƒ¼ã‚º",
      "mastiff": "ãƒã‚¹ãƒ†ã‚£ãƒ•", "mexicanhairless": "ãƒ¡ã‚­ã‚·ã‚«ãƒ³ãƒ»ãƒ˜ã‚¢ãƒ¬ã‚¹", "mix": "ãƒŸãƒƒã‚¯ã‚¹çŠ¬",
      "mountain": "ãƒãƒ¼ãƒ‹ãƒ¼ã‚ºãƒ»ãƒã‚¦ãƒ³ãƒ†ãƒ³ãƒ»ãƒ‰ãƒƒã‚°", "newfoundland": "ãƒ‹ãƒ¥ãƒ¼ãƒ•ã‚¡ãƒ³ãƒ‰ãƒ©ãƒ³ãƒ‰",
      "otterhound": "ã‚ªãƒƒã‚¿ãƒ¼ãƒã‚¦ãƒ³ãƒ‰", "papillon": "ãƒ‘ãƒ”ãƒ¨ãƒ³", "pekinese": "ãƒšã‚­ãƒ‹ãƒ¼ã‚º",
      "pembroke": "ã‚¦ã‚§ãƒ«ã‚·ãƒ¥ãƒ»ã‚³ãƒ¼ã‚®ãƒ¼ãƒ»ãƒšãƒ³ãƒ–ãƒ­ãƒ¼ã‚¯", "pinscher": "ãƒŸãƒ‹ãƒãƒ¥ã‚¢ãƒ»ãƒ”ãƒ³ã‚·ãƒ£ãƒ¼",
      "pitbull": "ãƒ”ãƒƒãƒˆãƒ–ãƒ«", "pointer": "ãƒã‚¤ãƒ³ã‚¿ãƒ¼", "pomeranian": "ãƒãƒ¡ãƒ©ãƒ‹ã‚¢ãƒ³",
      "poodle": "ãƒ—ãƒ¼ãƒ‰ãƒ«", "pug": "ãƒ‘ã‚°", "puggle": "ãƒ‘ã‚°ãƒ«",
      "pyrenees": "ã‚°ãƒ¬ãƒ¼ãƒˆãƒ»ãƒ”ãƒ¬ãƒ‹ãƒ¼ã‚º", "redbone": "ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ³ãƒ»ã‚¯ãƒ¼ãƒ³ãƒã‚¦ãƒ³ãƒ‰",
      "retriever": "ãƒ¬ãƒˆãƒªãƒ¼ãƒãƒ¼", "ridgeback": "ãƒ­ãƒ¼ãƒ‡ã‚·ã‚¢ãƒ³ãƒ»ãƒªãƒƒã‚¸ãƒãƒƒã‚¯", "rottweiler": "ãƒ­ãƒƒãƒˆãƒ¯ã‚¤ãƒ©ãƒ¼",
      "saluki": "ã‚µãƒ«ãƒ¼ã‚­", "samoyed": "ã‚µãƒ¢ã‚¨ãƒ‰", "schipperke": "ã‚¹ã‚­ãƒƒãƒ‘ãƒ¼ã‚­",
      "schnauzer": "ã‚·ãƒ¥ãƒŠã‚¦ã‚¶ãƒ¼", "setter": "ã‚»ãƒƒã‚¿ãƒ¼", "sheepdog": "ã‚·ãƒ¼ãƒ—ãƒ‰ãƒƒã‚°",
      "shiba": "æŸ´çŠ¬", "shihtzu": "ã‚·ãƒ¼ãƒ»ã‚ºãƒ¼", "spaniel": "ã‚¹ãƒ‘ãƒ‹ã‚¨ãƒ«",
      "springer": "ã‚¹ãƒ—ãƒªãƒ³ã‚¬ãƒ¼ãƒ»ã‚¹ãƒ‘ãƒ‹ã‚¨ãƒ«", "stbernard": "ã‚»ãƒ³ãƒˆãƒ»ãƒãƒ¼ãƒŠãƒ¼ãƒ‰", "terrier": "ãƒ†ãƒªã‚¢",
      "vizsla": "ãƒ´ã‚£ã‚ºãƒ©", "weimaraner": "ãƒ¯ã‚¤ãƒãƒ©ãƒŠãƒ¼", "whippet": "ã‚¦ã‚£ãƒšãƒƒãƒˆ", "wolfhound": "ã‚¢ã‚¤ãƒªãƒƒã‚·ãƒ¥ãƒ»ã‚¦ãƒ«ãƒ•ãƒã‚¦ãƒ³ãƒ‰"
    };

    let correctBreed = "";
    let correctCount = 0;
    let wrongCount = 0;

    const dogImage = document.getElementById("dogImage");
    const choicesDiv = document.getElementById("choices");
    const resultDiv = document.getElementById("result");
    const scoreDiv = document.getElementById("score");
    const nextBtn = document.getElementById("nextBtn");
    const resetBtn = document.getElementById("resetBtn");

    function updateScore() {
      scoreDiv.textContent = `æ­£è§£: ${correctCount} / ä¸æ­£è§£: ${wrongCount}`;
    }

    async function fetchDog() {
      resultDiv.textContent = "";
      nextBtn.style.display = "none";
      choicesDiv.innerHTML = "";

      const res = await fetch("https://dog.ceo/api/breeds/image/random");
      const data = await res.json();
      const url = data.message;
      dogImage.src = url;

      correctBreed = extractBreed(url);
      generateChoices(correctBreed);
    }

    function extractBreed(url) {
      const parts = url.split("/");
      const breedSegment = parts[4];
      const subparts = breedSegment.split("-");

      let candidates = [];

      for (let i = 0; i < subparts.length; i++) {
        for (let j = i + 1; j <= subparts.length; j++) {
          candidates.push(subparts.slice(i, j).join("").toLowerCase());
        }
      }

      for (const key of candidates) {
        if (breedMap[key]) return key;
      }

      return "mix";
    }

    function generateChoices(correct) {
      const allBreeds = Object.keys(breedMap);
      const choices = [correct];

      while (choices.length < 4) {
        const rand = allBreeds[Math.floor(Math.random() * allBreeds.length)];
        if (!choices.includes(rand)) choices.push(rand);
      }

      choices.sort(() => Math.random() - 0.5);

      choices.forEach(breed => {
        const btn = document.createElement("button");
        btn.textContent = breedMap[breed];
        btn.onclick = () => {
          if (breed === correct) {
            resultDiv.textContent = "æ­£è§£ï¼ğŸ‰";
            correctCount++;
          } else {
            resultDiv.textContent = `ä¸æ­£è§£â€¦æ­£è§£ã¯ã€Œ${breedMap[correct]}ã€ã ã‚ˆ`;
            wrongCount++;
          }
          updateScore();
          nextBtn.style.display = "inline-block";
        };
        choicesDiv.appendChild(btn);
      });
    }

    nextBtn.onclick = fetchDog;

    resetBtn.onclick = () => {
      correctCount = 0;
      wrongCount = 0;
      updateScore();
      resultDiv.textContent = "ã‚¹ã‚³ã‚¢ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸã‚ˆ";
    };

    fetchDog();

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').then(() => {
          console.log('Service Worker registered');
        });
      });
    }
  </script>
</body>
</html>
